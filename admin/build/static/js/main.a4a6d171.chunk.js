(this.webpackJsonppractice=this.webpackJsonppractice||[]).push([[0],{132:function(e,a,t){e.exports=t(220)},219:function(e,a,t){},220:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(11),r=t.n(c),s=t(29),i=t(41),o=t(7),d=t(15),m=t(47),u=t(52),_=t.n(u),E=(t(141),t(144),{apiKey:"AIzaSyB8bzdzxrTeMg3yFk83R2gMVHk0Zrh1GI0",authDomain:"daron-b15b1.firebaseapp.com",databaseURL:"https://daron-b15b1.firebaseio.com",projectId:"daron-b15b1",storageBucket:"daron-b15b1.appspot.com",messagingSenderId:"875304473033",appId:"1:875304473033:web:b0697833a48537eff41818"});_.a.apps.length?_.a.app():_.a.initializeApp(E);var v=_.a.firestore(),f=v.collection("users"),p=v.collection("tasks"),g=v.collection("messages"),b=v.collection("lesson"),h=v.collection("resources"),y=t(36),k=t.n(y),N=t(277),S=t(267),O=t(274),j=t(262),C=t(263),I=t(79),w=t.n(I),x=function(){var e=l.a.useState([]),a=Object(o.a)(e,2),t=a[0],n=a[1],c=l.a.useState(""),r=Object(o.a)(c,2),s=r[0],i=r[1],d=l.a.useState([]),u=Object(o.a)(d,2),E=u[0],v=u[1],f=l.a.useState(""),p=Object(o.a)(f,2),g=p[0],b=p[1],y=l.a.useState([]),I=Object(o.a)(y,2),x=I[0],T=I[1],A=l.a.useState(""),M=Object(o.a)(A,2),U=M[0],W=M[1],P=l.a.useState(""),D=Object(o.a)(P,2),L=D[0],z=D[1],R=l.a.useState(""),F=Object(o.a)(R,2),H=F[0],B=F[1],K=l.a.useState(""),V=Object(o.a)(K,2),G=V[0],J=V[1],X=l.a.useState(""),Z=Object(o.a)(X,2),q=Z[0],Q=Z[1],Y=l.a.useState(""),$=Object(o.a)(Y,2),ee=$[0],ae=$[1];l.a.useEffect((function(){h.onSnapshot((function(e){var a=[];e.forEach((function(e){var t=[];for(var n in e.data())t.push(e.data()[n]);a.push({id:e.id,title:t})})),n(a)}))}),[]),l.a.useEffect((function(){x.length&&(ae(x[0].text),Q(x[0].title))}),[x]);return l.a.createElement("div",{className:"admin_resources"},l.a.createElement("div",{className:"admin_resources__title"},l.a.createElement("div",{className:"admin_resources__accordion"},l.a.createElement(O.a,null,l.a.createElement(j.a,{expandIcon:l.a.createElement(w.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(C.a,null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e")),l.a.createElement("div",{style:{padding:15}},l.a.createElement("div",null,l.a.createElement(N.a,{value:L,onChange:function(e){z(String(e.target.value)||"")},fullWidth:!0,label:"\u041d\u0430\u0437\u043e\u0432\u0438\u0442\u0435 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e",variant:"outlined"})),l.a.createElement("div",{className:"admin_resources__accordion--btn"},l.a.createElement(S.a,{variant:"contained",color:"secondary",onClick:function(){return z("")}},"\u041e\u0442\u043c\u0435\u043d\u0430"),l.a.createElement(S.a,{onClick:function(){h.doc(L).set({}),z("")},variant:"contained",color:"secondary",disabled:!L},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))),l.a.createElement("div",{className:"admin_resources__title__nav"},t.map((function(e){return l.a.createElement("div",{key:e.id},l.a.createElement(S.a,{onClick:function(){return a=e.id,W(""),T([]),b(a),void h.doc(a).onSnapshot((function(e){var a=[];for(var t in e.data())a.push(t);v(a)}));var a},fullWidth:!0,color:"secondary"},e.id))}))),l.a.createElement("div",null,l.a.createElement("h2",null,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438"),l.a.createElement(N.a,{value:s,onChange:function(e){i(String(e.target.value)||"")},fullWidth:!0,label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438",variant:"outlined"}),l.a.createElement(S.a,{disabled:!s,onClick:function(){h.doc(s).get().then((function(e){e.exists?(h.doc(s).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)})),b(""),T([])):alert("\u0422\u0430\u043a\u043e\u0439 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442")}))},fullWidth:!0,color:"secondary"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e"))),l.a.createElement("div",{className:"admin_resources__items"},l.a.createElement("div",{className:"admin_resources__accordion"},l.a.createElement(O.a,null,l.a.createElement(j.a,{expandIcon:l.a.createElement(w.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(C.a,null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0434\u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e")),l.a.createElement("div",{style:{padding:15}},g?l.a.createElement("div",null,l.a.createElement("div",{style:{paddingBottom:10}},"\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f: ",g),l.a.createElement("div",null,l.a.createElement(N.a,{value:H,onChange:function(e){B(String(e.target.value)||"")},fullWidth:!0,label:"Title - \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438",variant:"outlined"})),l.a.createElement("div",{style:{marginTop:30}},l.a.createElement(N.a,{value:G,onChange:function(e){J(String(e.target.value)||"")},fullWidth:!0,placeholder:"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u0435\u0441\u044c \u0437\u043d\u0430\u043d\u0438\u044f\u043c\u0438, \u0441\u0435\u043d\u0441\u0435\u0439",multiline:!0,label:"\u0422\u0435\u043a\u0441\u0442 - \u043a\u043e\u043d\u0442\u0435\u043d\u0442 \u0443\u0440\u043e\u043a\u0430",variant:"outlined"})),l.a.createElement("div",{className:"admin_resources__accordion--btn"},l.a.createElement(S.a,{onClick:function(){B(""),J("")},variant:"contained",color:"secondary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),l.a.createElement(S.a,{onClick:function(){h.doc(g).set(Object(m.a)({},H,{title:H,text:G}),{merge:!0}),B(""),J("")},variant:"contained",color:"secondary",disabled:!H},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))):l.a.createElement("div",null,"\u0412\u044b \u0435\u0449\u0451 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043b\u0438 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e")))),E.map((function(e){return l.a.createElement("div",{key:e},l.a.createElement(S.a,{onClick:function(){return function(e){W(e),h.doc(g).get().then((function(a){a.exists?T([a.data()[e]]):console.log("No such document!")}))}(e)},fullWidth:!0,color:"primary"},e))}))),l.a.createElement("div",{className:"admin_resources__content"},l.a.createElement("div",{className:"admin_resources__accordion"},l.a.createElement(O.a,null,l.a.createElement(j.a,{expandIcon:l.a.createElement(w.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(C.a,null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e")),l.a.createElement("div",{style:{padding:15}},x.length?l.a.createElement("div",null,l.a.createElement("div",{style:{paddingBottom:10}},"\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f: ",x[0].title),l.a.createElement("div",null,l.a.createElement(N.a,{value:q,onChange:function(e){Q(String(e.target.value)||"")},fullWidth:!0,label:"Title - \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438",variant:"outlined"})),l.a.createElement("div",{style:{marginTop:30}},l.a.createElement(N.a,{value:ee,onChange:function(e){ae(String(e.target.value)||"")},fullWidth:!0,placeholder:"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u0435\u0441\u044c \u0437\u043d\u0430\u043d\u0438\u044f\u043c\u0438, \u0441\u0435\u043d\u0441\u0435\u0439",multiline:!0,label:"\u0422\u0435\u043a\u0441\u0442 - \u043a\u043e\u043d\u0442\u0435\u043d\u0442 \u0443\u0440\u043e\u043a\u0430",variant:"outlined"})),l.a.createElement("div",{className:"admin_resources__accordion--btn"},l.a.createElement(S.a,{onClick:function(){Q(x[0].title),ae(x[0].text)},variant:"contained",color:"secondary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),l.a.createElement(S.a,{onClick:function(){h.doc(g).update(Object(m.a)({},U,_.a.firestore.FieldValue.delete())),h.doc(g).set(Object(m.a)({},q,{title:q,text:ee}),{merge:!0}),T([{title:q,text:ee}]),W(q)},variant:"contained",color:"secondary"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))):l.a.createElement("div",null,"\u0412\u044b \u0435\u0449\u0451 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043b\u0438 \u043f\u043e\u0434\u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e")))),!!x.length&&l.a.createElement("div",{key:x[0].title,className:"admin_resources__content__wrapper"},l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("h2",null,x[0].title),l.a.createElement(S.a,{onClick:function(){return x[0].title,h.doc(g).update(Object(m.a)({},U,_.a.firestore.FieldValue.delete())),T([]),void W("")},color:"secondary"},"Delete")),l.a.createElement("div",null,l.a.createElement(k.a,{source:x[0].text})))))},T=t(125),A=t(275),M=t(221),U=t(120),W=t.n(U),P=function(){var e=l.a.useState([]),a=Object(o.a)(e,2),t=a[0],n=a[1],c=l.a.useState(""),r=Object(o.a)(c,2),s=r[0],i=r[1],d=l.a.useState(""),m=Object(o.a)(d,2),u=m[0],_=m[1],E=l.a.useState(""),v=Object(o.a)(E,2),f=v[0],p=v[1],g=l.a.useState(""),h=Object(o.a)(g,2),y=h[0],k=h[1],O=l.a.useState(!1),j=Object(o.a)(O,2),C=j[0],I=j[1];l.a.useEffect((function(){b.onSnapshot((function(e){var a=[];_(String(e.docs.length+1)),e.forEach((function(e){a.push({number:e.data().number,text:e.data().text,videoPath:e.data().videoPath})})),n(a)}))}),[]);var w=function(e,a){"clickaway"!==a&&I(!1)};return l.a.createElement("div",{className:"admin__lesson"},l.a.createElement("div",{className:"admin__lesson__nav"},l.a.createElement("nav",null,l.a.createElement("ul",null,l.a.createElement("li",{className:"admin__lesson__nav__item--first"},l.a.createElement(S.a,{onClick:function(){i(u),p(""),k("")},color:"secondary",variant:"outlined"},"New lesson")),!!t.length&&t.map((function(e){return l.a.createElement("li",{key:e.number},l.a.createElement(S.a,{onClick:function(){return function(e){var a=t.find((function(a){return a.number===e}));i(a.number),p(a.videoPath),k(a.text)}(e.number)},color:"secondary",variant:"outlined"},"Lesson \u2116",e.number))}))))),l.a.createElement("div",{className:"admin__lesson__content"},l.a.createElement("div",{className:"admin__lesson__content"},l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("div",{className:"admin__lesson__textField"},l.a.createElement(N.a,{value:s,onChange:function(e){i(String(e.target.value)||"")},label:"Lesson Number",variant:"outlined"})),l.a.createElement("div",{className:"admin__lesson__textField"},l.a.createElement(N.a,{style:{width:770},value:f,onChange:function(e){p(String(e.target.value)||"")},label:"Lesson Video Path",variant:"outlined"}))),l.a.createElement("div",{className:"admin__message__button"},l.a.createElement(S.a,{color:"primary",disabled:0===y.length||!s||!f,variant:"contained",onClick:function(){b&&b.doc(s).set({number:s,text:y,videoPath:f,newLesson:!0}),k(""),i(""),p(""),I(!0)}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))),l.a.createElement("div",{className:"admin__lesson__field"},l.a.createElement(T.a,{className:"scrollbar",value:y,onChange:function(e){k(e.target.value)},fullWidth:!0,inputProps:{"aria-label":"naked"},multiline:!0,placeholder:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u044f\u0437\u044b\u043a \u0440\u0430\u0437\u043c\u0435\u0442\u043a\u0438 - Markdown"}))),l.a.createElement(A.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:C,autoHideDuration:6e3,onClose:w,message:"\u0423\u0440\u043e\u043a \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d",action:l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{color:"secondary",size:"small",onClick:w},"\u0421\u043a\u0440\u044b\u0442\u044c"),l.a.createElement(M.a,{size:"small","aria-label":"close",color:"inherit",onClick:w},l.a.createElement(W.a,{fontSize:"small"})))}))},D=t(24),L=t(276),z=t(268),R=t(281),F=t(271),H=t(76),B=t.n(H),K=function(e){var a=e.message,t=e.setOpen,n=e.setTaskId,c=e.newMessage;return l.a.createElement("div",{className:"admin__message__item"},l.a.createElement("div",{className:"admin__message__user"},l.a.createElement("div",{className:"admin__message__user--info"},l.a.createElement(R.a,{className:"admin__message__avatar",alt:"user avatar",src:a.profilePicUrl||void 0}),l.a.createElement("div",{className:"admin__message__title"},l.a.createElement("span",{className:"admin__message__name"},a.name),l.a.createElement("span",{className:"admin__message__info"},"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e ",Object(F.a)(a.createdAt.toDate(),"dd.MM.yyyy, \u0432 HH.mm.ss")))),l.a.createElement("div",null,c?l.a.createElement(S.a,{onClick:function(){n(a.taskId),t(!0)}},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u0434\u0438\u0430\u043b\u043e\u0433"):l.a.createElement(S.a,{color:"secondary",onClick:function(){return e=a.messageId,void g.doc(e).delete();var e},startIcon:l.a.createElement(B.a,null)},"DELETE"))),l.a.createElement("div",{className:"admin__message__item-text"},l.a.createElement(k.a,{source:a.text})))},V=t(269);function G(e){var a=e.taskId,t=e.open,n=e.setOpen,c=l.a.useState(""),r=Object(o.a)(c,2),s=r[0],i=r[1],d=l.a.useState([]),m=Object(o.a)(d,2),u=m[0],_=m[1],E=l.a.useState([]),v=Object(o.a)(E,2),f=v[0],b=v[1];l.a.useEffect((function(){t&&(g.where("taskId","==",a).orderBy("createdAt","asc").onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(Object(D.a)(Object(D.a)({},e.data()),{},{messageId:e.id}))})),_(a)})),p.doc(a).get().then((function(e){e.exists&&b(e.data())})))}),[t]);var h=function(){s&&g.add({name:ye,text:s,profilePicUrl:ke,createdAt:new Date,newMessage:!0,uid:he,taskId:a}),i("")};return l.a.createElement("div",null,l.a.createElement(L.a,{open:t,onClose:function(){n(!1),g.where("taskId","==",a).where("uid","!=",he).where("newMessage","==",!0).get().then((function(e){e.forEach((function(e){g.doc(e.id).update({newMessage:!1})}))}))},maxWidth:"lg",scroll:"body","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},l.a.createElement(z.a,null,l.a.createElement("div",{className:"admin__table__content--task admin__".concat(f.status)},l.a.createElement("h2",null,"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u2116",f.number),l.a.createElement("div",{className:"admin__table__content--messages--info"},l.a.createElement("p",{className:"admin__decision-link"},l.a.createElement("b",null,"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 pull-\u0440\u0435\u043a\u0432\u0435\u0441\u0442: "),l.a.createElement("a",{href:f.reference,rel:"noopener noreferrer",target:"_blank"},f.reference)),l.a.createElement("div",{className:"admin__decision"},l.a.createElement("b",null,"\u0417\u0430\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438:"),!!f.decision&&f.decision.map((function(e){return l.a.createElement("div",null,l.a.createElement("div",{className:"admin__message__user"},l.a.createElement("div",{className:"admin__message__user--info"},l.a.createElement(R.a,{className:"admin__message__avatar",alt:"user avatar",src:e.avatar||void 0}),l.a.createElement("div",{className:"admin__message__title"},l.a.createElement("span",{className:"admin__message__name"},e.name),l.a.createElement("span",{className:"admin__message__info"},"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e"," ",Object(F.a)(e.createdAt.toDate(),"dd.MM.yyyy, \u0432 HH.mm.ss"))))),l.a.createElement("div",{className:"admin__message__item-text"},l.a.createElement(k.a,{source:e.text})))}))))),!!u.length&&u.map((function(e){return l.a.createElement(K,{key:e.messageId,message:e,newMessages:!1})})),l.a.createElement("div",{className:"admin__message__chat"},l.a.createElement("div",{className:"admin__message__chat-field"},l.a.createElement(T.a,{className:"scrollbar",rows:4,rowsMax:10,value:s,onChange:function(e){i(e.target.value)},onKeyUp:function(e){e.shiftKey||"Enter"!==e.key||h()},fullWidth:!0,inputProps:{"aria-label":"naked"},multiline:!0,placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})),l.a.createElement("div",{className:"admin__message__button"},l.a.createElement(S.a,{color:"primary",disabled:0===s.length,variant:"contained",onClick:h,endIcon:l.a.createElement(V.a,null,"send")},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))))}var J,X=function(e){var a=e.setTaskId,t=e.setOpen,n=l.a.useState([]),c=Object(o.a)(n,2),r=c[0],s=c[1];return l.a.useEffect((function(){g.where("newMessage","==",!0).where("uid","!=",he).orderBy("uid","asc").orderBy("createdAt","asc").onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(Object(D.a)(Object(D.a)({},e.data()),{},{messageId:e.id}))})),s(a)}))}),[]),l.a.createElement("div",{className:"admin__table__content--messages scrollbar"},l.a.createElement("h2",{style:{position:"sticky",top:0,backgroundColor:"#fff",zIndex:500}},"\u041d\u0435\u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043d\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439: ",r.length),!!r.length&&r.map((function(e){return l.a.createElement(K,{key:e.messageId,setOpen:t,setTaskId:a,message:e,newMessage:!0})})))},Z=function(e){return function(e){return e.tasks}(e).items},q=t(95),Q=t.n(q),Y=t(270),$=t(273),ee=t(279),ae=t(280),te=t(272),ne=t(264),le=function(e){var a=e.taskCurrentUser,t=e.setUserMessages,n=e.setCurrentTaskInfo,c=e.setOpen,r=e.setTaskId,s=e.tasksPending,i=l.a.useState(""),d=Object(o.a)(i,2),m=d[0],u=d[1],E=l.a.useState(!1),v=Object(o.a)(E,2),f=v[0],b=v[1],h=l.a.useState(),y=Object(o.a)(h,2),k=y[0],N=y[1],O=function(){b(!1),u("")};return l.a.createElement("div",{className:"admin__table__content--task admin__".concat(a.status)},l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("div",null,l.a.createElement("span",{style:{fontWeight:500,fontSize:24}},a.status),l.a.createElement("span",{style:{color:"gray",fontWeight:500,fontSize:19,paddingLeft:10}},Object(F.a)(a.createdAt.toDate(),"dd.MM.yyyy - HH:mm"))),l.a.createElement("span",{style:{fontWeight:600,fontSize:24}},"\u0423\u0440\u043e\u043a \u2116"+a.number),"pending"===a.status&&l.a.createElement("div",null,l.a.createElement(S.a,{onClick:function(){u(""),b(!0)},variant:"outlined",color:"secondary"},"\u0440\u0435\u0448\u0435\u043d\u0438\u0435"))),l.a.createElement("p",null,"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0433\u0438\u0442\u0445\u0430\u0431:",a.reference),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},s?l.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){r(a.taskId),c(!0)}},"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",l.a.createElement(Y.a,{style:{color:"grey",marginLeft:5},color:"secondary",badgeContent:0,variant:"dot"},l.a.createElement(Q.a,null))):l.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){n(a),g.where("taskId","==",a.taskId).orderBy("createdAt","asc").onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(Object(D.a)(Object(D.a)({},e.data()),{},{messageId:e.id}))})),t(a)}))}},"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",l.a.createElement(Y.a,{style:{color:"grey",marginLeft:5},color:"secondary",badgeContent:0,variant:"dot"},l.a.createElement(Q.a,null))),l.a.createElement(S.a,{color:"secondary",onClick:function(){p.doc(a.taskId).delete(),g.where("taskId","==",a.taskId).get().then((function(e){e.forEach((function(e){e.ref.delete()}))}))},startIcon:l.a.createElement(B.a,null)},"DELETE")),l.a.createElement($.a,{className:"admin_activities__modal",open:f,onClose:O,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},l.a.createElement("div",{className:"item-wrapper admin__modal"},l.a.createElement(ee.a,{className:"admin_activities__formControl"},l.a.createElement(ae.a,{htmlFor:"demo-dialog-native"},"\u0420\u0435\u0448\u0435\u043d\u0438\u0435"),l.a.createElement(te.a,{native:!0,value:k,onChange:function(e){N(String(e.target.value)||"")},input:l.a.createElement(ne.a,{id:"demo-dialog-native"})},l.a.createElement("option",{"aria-label":"None",value:""}),l.a.createElement("option",{value:"completed"},"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),l.a.createElement("option",{value:"rejected"},"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e"))),l.a.createElement("p",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439: "),l.a.createElement("div",{className:"admin__modal-field"},l.a.createElement(T.a,{className:"scrollbar",rows:8,value:m,onChange:function(e){u(e.target.value)},fullWidth:!0,inputProps:{"aria-label":"naked"},multiline:!0,placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})),l.a.createElement("div",{className:"admin__modal-button"},l.a.createElement("div",{className:"button--cancel"},l.a.createElement(S.a,{onClick:O,variant:"contained"},"\u041e\u0442\u043c\u0435\u043d\u0430")),l.a.createElement("div",{className:"button--send"},l.a.createElement(S.a,{onClick:function(){return e=k,console.log(a),p.doc(a.taskId).update({status:e,decision:_.a.firestore.FieldValue.arrayUnion({text:m,avatar:ke,name:ye,createdAt:new Date}),newTask:!0,responseAt:new Date}),void b(!1);var e},disabled:!k,variant:"contained"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))))},ce=function(e){var a=e.setOpen,t=e.setTaskId,n=l.a.useState([]),c=Object(o.a)(n,2),r=c[0],i=c[1],d=Object(s.c)(Z);return l.a.useEffect((function(){i(d.filter((function(e){return"pending"===e.status})))}),[d]),l.a.createElement("div",{className:"admin__table__content--tasks scrollbar"},l.a.createElement("h2",{style:{position:"sticky",top:0,backgroundColor:"#fff",zIndex:500}},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u0430\u0441\u043a\u043e\u0432 \u0432 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0438: ",r.length),!!r.length&&r.map((function(e){return l.a.createElement(le,{key:e.taskId,tasksPending:!0,setTaskId:t,setOpen:a,taskCurrentUser:e})})))},re=t(282),se=t(96),ie=t.n(se),oe=function(e){return function(e){return e.users}(e).items},de=function(){var e=l.a.useState([]),a=Object(o.a)(e,2),t=a[0],n=a[1],c=l.a.useState([]),r=Object(o.a)(c,2),i=r[0],d=r[1],m=Object(s.c)(oe);l.a.useEffect((function(){n(m.filter((function(e){return!1===e.accepted}))),d(m.filter((function(e){return!0===e.accepted})))}),[m]);var u=function(e){e.accepted&&f.doc(e.uid).update({accepted:!1}),e.accepted||f.doc(e.uid).update({accepted:!0})};return m?l.a.createElement("div",{className:"admin__users"},l.a.createElement("div",{className:"admin__users__auth"},l.a.createElement("h2",null,"\u041d\u0435 \u043e\u043f\u043b\u0430\u0442\u0438\u0432\u0448\u0438\u0435 \u043a\u0443\u0440\u0441 (",t.length,"):"),l.a.createElement("div",{className:"admin__users__list"},t.length?t.map((function(e){return l.a.createElement("div",{key:e.uid,className:"admin__users__list__item"},l.a.createElement(re.a,{variant:"outlined",label:e.displayName||e.email||e.uid,color:"secondary",avatar:l.a.createElement(R.a,{src:e.photoURL})}),l.a.createElement(M.a,{onClick:function(){return u(e)}},l.a.createElement(ie.a,null)))})):l.a.createElement("div",null,"\u041a\u0430\u0436\u0438\u0441\u044c \u043f\u0443\u0441\u0442\u043e..."))),l.a.createElement("div",{className:"admin__users__accepted"},l.a.createElement("h2",null," \u041e\u043f\u043b\u0430\u0442\u0438\u0432\u0448\u0438\u0435 \u043a\u0443\u0440\u0441 (",i.length,"):"),l.a.createElement("div",{className:"admin__users__list__accepted"},i.length?i.map((function(e){return l.a.createElement("div",{key:e.uid,className:"admin__users__list__item"},l.a.createElement(re.a,{variant:"outlined",label:e.displayName||e.email,color:"secondary",avatar:l.a.createElement(R.a,{src:e.photoURL})}),l.a.createElement(M.a,{onClick:function(){return u(e)}},l.a.createElement(ie.a,null)))})):l.a.createElement("div",null,"\u041a\u0430\u0436\u0438\u0441\u044c \u043f\u0443\u0441\u0442\u043e...")))):l.a.createElement("div",null,"\u0413\u0440\u0443\u0437\u0438\u043c, \u0433\u0440\u0443\u0437\u0438\u043c...")},me=function(){var e=l.a.useState(!1),a=Object(o.a)(e,2),t=a[0],n=a[1],c=l.a.useState(),r=Object(o.a)(c,2),s=r[0],i=r[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(de,null),l.a.createElement("div",{className:"admin__table__content"},l.a.createElement(ce,{setTaskId:i,setOpen:n}),l.a.createElement(X,{setTaskId:i,setOpen:n}),l.a.createElement(G,{open:t,setOpen:n,taskId:s})))},ue=function(){var e=l.a.useState([]),a=Object(o.a)(e,2),t=a[0],n=a[1],c=l.a.useState([]),r=Object(o.a)(c,2),i=r[0],d=r[1],m=l.a.useState(),u=Object(o.a)(m,2),_=u[0],E=u[1],v=l.a.useState(""),f=Object(o.a)(v,2),b=f[0],h=f[1],y=Object(s.c)(oe),N=function(){b&&(console.log(_),g.add({name:ye,profilePicUrl:ke,uid:he,text:b,createdAt:new Date,newMessage:!0,taskId:_.taskId})),h("")};return l.a.createElement("div",null,l.a.createElement("div",{className:"admin__table"},l.a.createElement("div",{className:"admin__table__header"},y.filter((function(e){return e.accepted})).map((function(e){return l.a.createElement("div",{className:"admin__table__header--item",key:e.uid},l.a.createElement(S.a,{startIcon:l.a.createElement(R.a,{src:e.photoURL||void 0}),variant:"contained",color:"primary",onClick:function(){return a=e.uid,d([]),E(void 0),void p.where("uid","==",a).orderBy("createdAt","asc").onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(Object(D.a)(Object(D.a)({},e.data()),{},{taskId:e.id}))})),n(a)}));var a}},e.displayName||e.email||e.uid))}))),l.a.createElement("div",{className:"admin__table__content"},l.a.createElement("div",{className:"admin__table__content--tasks scrollbar"},!!t.length&&t.map((function(e){return l.a.createElement(le,{key:e.taskId,taskCurrentUser:e,setUserMessages:d,setCurrentTaskInfo:E})}))),l.a.createElement("div",{className:"admin__table__content--messages scrollbar"},_&&l.a.createElement("div",{className:"admin__table__content--messages--info"},l.a.createElement("p",{className:"admin__decision-link"},l.a.createElement("b",null,"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 pull-\u0440\u0435\u043a\u0432\u0435\u0441\u0442: "),l.a.createElement("a",{href:_.reference,rel:"noopener noreferrer",target:"_blank"},_.reference)),l.a.createElement("div",{className:"admin__decision"},l.a.createElement("b",null,"\u0417\u0430\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438:"),_.decision.map((function(e){return l.a.createElement("div",null,l.a.createElement("div",{className:"admin__message__user"},l.a.createElement("div",{className:"admin__message__user--info"},l.a.createElement(R.a,{className:"admin__message__avatar",alt:"user avatar",src:e.avatar||void 0}),l.a.createElement("div",{className:"admin__message__title"},l.a.createElement("span",{className:"admin__message__name"},e.name),l.a.createElement("span",{className:"admin__message__info"},"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e"," ",Object(F.a)(e.createdAt.toDate(),"dd.MM.yyyy, \u0432 HH.mm.ss"))))),l.a.createElement("div",{className:"admin__message__item-text"},l.a.createElement(k.a,{source:e.text})))}))||"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442")),!!i.length&&i.map((function(e){return l.a.createElement(K,{key:e.messageId,newMessage:!1,message:e})})),_&&l.a.createElement("div",{className:"admin__message__chat"},l.a.createElement("div",{className:"admin__message__chat-field"},l.a.createElement(T.a,{className:"scrollbar",rows:4,rowsMax:10,value:b,onChange:function(e){h(e.target.value)},onKeyUp:function(e){e.shiftKey||"Enter"!==e.key||N()},fullWidth:!0,inputProps:{"aria-label":"naked"},multiline:!0,placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})),l.a.createElement("div",{className:"admin__message__button"},l.a.createElement(S.a,{color:"primary",disabled:0===b.length||!_,variant:"contained",onClick:N,endIcon:l.a.createElement(V.a,null,"send")},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))))))},_e=function(){return l.a.createElement("div",{className:"admin__nav"},l.a.createElement(i.b,{to:"/"},l.a.createElement(S.a,null,"\u041d\u043e\u0432\u043e\u0441\u0442\u0438")),l.a.createElement(i.b,{to:"/users"},l.a.createElement(S.a,null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438")),l.a.createElement(i.b,{to:"/lesson"},l.a.createElement(S.a,null,"\u0412\u0438\u0434\u0435\u043e \u0443\u0440\u043e\u043a\u0438")),l.a.createElement(i.b,{to:"/resources"},l.a.createElement(S.a,null,"\u0420\u0435\u0441\u0443\u0440\u0441\u044b")))};!function(e){e.SET_TASKS="tasks/SET_TASKS"}(J||(J={}));var Ee;!function(e){e.SET_USERS="users/SET_USERS"}(Ee||(Ee={}));var ve=t(121),fe=t(122),pe=_.a.auth(),ge=new _.a.auth.GithubAuthProvider,be=new(function(){function e(){Object(ve.a)(this,e)}return Object(fe.a)(e,[{key:"signIn",value:function(){pe.signInWithPopup(ge)}},{key:"signOut",value:function(){_.a.auth().signOut()}}]),e}()),he="12086860",ye="\u0426\u0430\u0440\u0435\u0432\u0438\u0447",ke="https://avatars3.githubusercontent.com/u/12086860?v=4";function Ne(){var e=l.a.useState(!1),a=Object(o.a)(e,2),t=a[0],n=a[1],c=Object(s.b)();l.a.useEffect((function(){_.a.auth().onAuthStateChanged((function(e){e&&f.doc(e.uid).get().then((function(e){var a;e.exists&&n((null===(a=e.data())||void 0===a?void 0:a.admin)||!1)}))})),p.onSnapshot((function(e){var a,t=[];e.forEach((function(e){var a,n,l;t.push({number:e.data().number,status:e.data().status,taskId:e.id,createdAt:e.data().createdAt,responseAt:null===(a=e.data())||void 0===a?void 0:a.responseAt,newTask:e.data().newTask,description:null===(n=e.data())||void 0===n?void 0:n.description,reference:null===(l=e.data())||void 0===l?void 0:l.reference,uid:e.data().uid})})),c((a=t,{type:J.SET_TASKS,payload:a}))}))}),[c]),l.a.useEffect((function(){f.onSnapshot((function(e){var a,t=[];e.forEach((function(e){var a,n,l;t.push({accepted:e.data().accepted,displayName:null===(a=e.data())||void 0===a?void 0:a.displayName,email:null===(n=e.data())||void 0===n?void 0:n.email,learningFlow:e.data().learningFlow,photoURL:null===(l=e.data())||void 0===l?void 0:l.photoURL,uid:e.data().uid})})),c((a=t,{type:Ee.SET_USERS,payload:a}))}))}),[c]);return t?l.a.createElement("div",{className:"App"},l.a.createElement(_e,null),l.a.createElement(d.a,{exact:!0,path:"/lesson"},l.a.createElement(P,null)),l.a.createElement(d.a,{exact:!0,path:"/resources"},l.a.createElement(x,null)),l.a.createElement(d.a,{exact:!0,path:"/users"},l.a.createElement(ue,null)),l.a.createElement(d.a,{exact:!0,path:"/"},l.a.createElement(me,null))):l.a.createElement("div",{className:"signin__item"},l.a.createElement("h1",null,"\u0412\u0445\u043e\u0434 \u0432 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"),l.a.createElement("button",{onClick:function(){be.signIn()}},"\u0412\u043e\u0439\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 GitHub"))}t(219);var Se=t(38),Oe=t(123),je=t(77),Ce=Object(je.a)((function(e,a){switch(a.type){case J.SET_TASKS:e.items=a.payload}}),{items:[]}),Ie=Object(je.a)((function(e,a){switch(a.type){case Ee.SET_USERS:e.items=a.payload}}),{items:[]}),we=Object(Se.c)({tasks:Ce,users:Ie}),xe="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Se.d,Te=Object(Se.e)(we,xe(Object(Se.a)(Oe.a))),Ae=document.getElementById("root");r.a.render(l.a.createElement(s.a,{store:Te},l.a.createElement(i.a,null,l.a.createElement(Ne,null))),Ae)}},[[132,1,2]]]);
//# sourceMappingURL=main.a4a6d171.chunk.js.map