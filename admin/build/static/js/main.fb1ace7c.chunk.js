(this.webpackJsonppractice=this.webpackJsonppractice||[]).push([[0],{130:function(e,a,t){e.exports=t(218)},217:function(e,a,t){},218:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(11),r=t.n(c),i=t(35),s=t(40),o=t(15),d=t(46),m=t(7),u=t(51),E=t.n(u),_=(t(139),t(142),{apiKey:"AIzaSyB8bzdzxrTeMg3yFk83R2gMVHk0Zrh1GI0",authDomain:"daron-b15b1.firebaseapp.com",databaseURL:"https://daron-b15b1.firebaseio.com",projectId:"daron-b15b1",storageBucket:"daron-b15b1.appspot.com",messagingSenderId:"875304473033",appId:"1:875304473033:web:b0697833a48537eff41818"});E.a.apps.length?E.a.app():E.a.initializeApp(_);var f=E.a.firestore(),v=f.collection("users"),p=f.collection("tasks"),b=f.collection("messages"),h=f.collection("lesson"),g=f.collection("resources"),y=t(65),k=t.n(y),S=t(275),N=t(265),O=t(272),j=t(260),C=t(261),w=t(79),I=t.n(w),x=function(){var e=l.a.useState([]),a=Object(m.a)(e,2),t=a[0],n=a[1],c=l.a.useState(""),r=Object(m.a)(c,2),i=r[0],s=r[1],o=l.a.useState([]),u=Object(m.a)(o,2),_=u[0],f=u[1],v=l.a.useState(""),p=Object(m.a)(v,2),b=p[0],h=p[1],y=l.a.useState([]),w=Object(m.a)(y,2),x=w[0],T=w[1],A=l.a.useState(""),M=Object(m.a)(A,2),U=M[0],W=M[1],L=l.a.useState(""),z=Object(m.a)(L,2),D=z[0],P=z[1],R=l.a.useState(""),B=Object(m.a)(R,2),F=B[0],K=B[1],H=l.a.useState(""),V=Object(m.a)(H,2),J=V[0],X=V[1],G=l.a.useState(""),Z=Object(m.a)(G,2),q=Z[0],Q=Z[1],Y=l.a.useState(""),$=Object(m.a)(Y,2),ee=$[0],ae=$[1];l.a.useEffect((function(){g.onSnapshot((function(e){var a=[];e.forEach((function(e){var t=[];for(var n in e.data())t.push(e.data()[n]);a.push({id:e.id,title:t})})),n(a)}))}),[]),l.a.useEffect((function(){x.length&&(ae(x[0].text),Q(x[0].title))}),[x]);return l.a.createElement("div",{className:"admin_resources"},l.a.createElement("div",{className:"admin_resources__title"},l.a.createElement("div",{className:"admin_resources__accordion"},l.a.createElement(O.a,null,l.a.createElement(j.a,{expandIcon:l.a.createElement(I.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(C.a,null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e")),l.a.createElement("div",{style:{padding:15}},l.a.createElement("div",null,l.a.createElement(S.a,{value:D,onChange:function(e){P(String(e.target.value)||"")},fullWidth:!0,label:"\u041d\u0430\u0437\u043e\u0432\u0438\u0442\u0435 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e",variant:"outlined"})),l.a.createElement("div",{className:"admin_resources__accordion--btn"},l.a.createElement(N.a,{variant:"contained",color:"secondary",onClick:function(){return P("")}},"\u041e\u0442\u043c\u0435\u043d\u0430"),l.a.createElement(N.a,{onClick:function(){g.doc(D).set({}),P("")},variant:"contained",color:"secondary",disabled:!D},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))),l.a.createElement("div",{className:"admin_resources__title__nav"},t.map((function(e){return l.a.createElement("div",{key:e.id},l.a.createElement(N.a,{onClick:function(){return a=e.id,W(""),T([]),h(a),void g.doc(a).onSnapshot((function(e){var a=[];for(var t in e.data())a.push(t);f(a)}));var a},fullWidth:!0,color:"secondary"},e.id))}))),l.a.createElement("div",null,l.a.createElement("h2",null,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438"),l.a.createElement(S.a,{value:i,onChange:function(e){s(String(e.target.value)||"")},fullWidth:!0,label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438",variant:"outlined"}),l.a.createElement(N.a,{disabled:!i,onClick:function(){g.doc(i).get().then((function(e){e.exists?(g.doc(i).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)})),h(""),T([])):alert("\u0422\u0430\u043a\u043e\u0439 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442")}))},fullWidth:!0,color:"secondary"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e"))),l.a.createElement("div",{className:"admin_resources__items"},l.a.createElement("div",{className:"admin_resources__accordion"},l.a.createElement(O.a,null,l.a.createElement(j.a,{expandIcon:l.a.createElement(I.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(C.a,null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0434\u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e")),l.a.createElement("div",{style:{padding:15}},b?l.a.createElement("div",null,l.a.createElement("div",{style:{paddingBottom:10}},"\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f: ",b),l.a.createElement("div",null,l.a.createElement(S.a,{value:F,onChange:function(e){K(String(e.target.value)||"")},fullWidth:!0,label:"Title - \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438",variant:"outlined"})),l.a.createElement("div",{style:{marginTop:30}},l.a.createElement(S.a,{value:J,onChange:function(e){X(String(e.target.value)||"")},fullWidth:!0,placeholder:"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u0435\u0441\u044c \u0437\u043d\u0430\u043d\u0438\u044f\u043c\u0438, \u0441\u0435\u043d\u0441\u0435\u0439",multiline:!0,label:"\u0422\u0435\u043a\u0441\u0442 - \u043a\u043e\u043d\u0442\u0435\u043d\u0442 \u0443\u0440\u043e\u043a\u0430",variant:"outlined"})),l.a.createElement("div",{className:"admin_resources__accordion--btn"},l.a.createElement(N.a,{onClick:function(){K(""),X("")},variant:"contained",color:"secondary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),l.a.createElement(N.a,{onClick:function(){g.doc(b).set(Object(d.a)({},F,{title:F,text:J}),{merge:!0}),K(""),X("")},variant:"contained",color:"secondary",disabled:!F},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))):l.a.createElement("div",null,"\u0412\u044b \u0435\u0449\u0451 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043b\u0438 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e")))),_.map((function(e){return l.a.createElement("div",{key:e},l.a.createElement(N.a,{onClick:function(){return function(e){W(e),g.doc(b).get().then((function(a){a.exists?T([a.data()[e]]):console.log("No such document!")}))}(e)},fullWidth:!0,color:"primary"},e))}))),l.a.createElement("div",{className:"admin_resources__content"},l.a.createElement("div",{className:"admin_resources__accordion"},l.a.createElement(O.a,null,l.a.createElement(j.a,{expandIcon:l.a.createElement(I.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(C.a,null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e")),l.a.createElement("div",{style:{padding:15}},x.length?l.a.createElement("div",null,l.a.createElement("div",{style:{paddingBottom:10}},"\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f: ",x[0].title),l.a.createElement("div",null,l.a.createElement(S.a,{value:q,onChange:function(e){Q(String(e.target.value)||"")},fullWidth:!0,label:"Title - \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438",variant:"outlined"})),l.a.createElement("div",{style:{marginTop:30}},l.a.createElement(S.a,{value:ee,onChange:function(e){ae(String(e.target.value)||"")},fullWidth:!0,placeholder:"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u0435\u0441\u044c \u0437\u043d\u0430\u043d\u0438\u044f\u043c\u0438, \u0441\u0435\u043d\u0441\u0435\u0439",multiline:!0,label:"\u0422\u0435\u043a\u0441\u0442 - \u043a\u043e\u043d\u0442\u0435\u043d\u0442 \u0443\u0440\u043e\u043a\u0430",variant:"outlined"})),l.a.createElement("div",{className:"admin_resources__accordion--btn"},l.a.createElement(N.a,{onClick:function(){Q(x[0].title),ae(x[0].text)},variant:"contained",color:"secondary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),l.a.createElement(N.a,{onClick:function(){g.doc(b).update(Object(d.a)({},U,E.a.firestore.FieldValue.delete())),g.doc(b).set(Object(d.a)({},q,{title:q,text:ee}),{merge:!0}),T([{title:q,text:ee}]),W(q)},variant:"contained",color:"secondary"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))):l.a.createElement("div",null,"\u0412\u044b \u0435\u0449\u0451 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043b\u0438 \u043f\u043e\u0434\u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e")))),!!x.length&&l.a.createElement("div",{key:x[0].title,className:"admin_resources__content__wrapper"},l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("h2",null,x[0].title),l.a.createElement(N.a,{onClick:function(){return x[0].title,g.doc(b).update(Object(d.a)({},U,E.a.firestore.FieldValue.delete())),T([]),void W("")},color:"secondary"},"Delete")),l.a.createElement("div",null,l.a.createElement(k.a,{source:x[0].text})))))},T=t(122),A=t(273),M=t(219),U=t(118),W=t.n(U),L=function(){var e=l.a.useState([]),a=Object(m.a)(e,2),t=a[0],n=a[1],c=l.a.useState(""),r=Object(m.a)(c,2),i=r[0],s=r[1],o=l.a.useState(""),d=Object(m.a)(o,2),u=d[0],E=d[1],_=l.a.useState(""),f=Object(m.a)(_,2),v=f[0],p=f[1],b=l.a.useState(""),g=Object(m.a)(b,2),y=g[0],k=g[1],O=l.a.useState(!1),j=Object(m.a)(O,2),C=j[0],w=j[1];l.a.useEffect((function(){h.onSnapshot((function(e){var a=[];E(String(e.docs.length+1)),e.forEach((function(e){a.push({number:e.data().number,text:e.data().text,videoPath:e.data().videoPath})})),n(a)}))}),[]);var I=function(e,a){"clickaway"!==a&&w(!1)};return l.a.createElement("div",{className:"admin__lesson"},l.a.createElement("div",{className:"admin__lesson__nav"},l.a.createElement("nav",null,l.a.createElement("ul",null,l.a.createElement("li",{className:"admin__lesson__nav__item--first"},l.a.createElement(N.a,{onClick:function(){s(u),p(""),k("")},color:"secondary",variant:"outlined"},"New lesson")),!!t.length&&t.map((function(e){return l.a.createElement("li",{key:e.number},l.a.createElement(N.a,{onClick:function(){return function(e){var a=t.find((function(a){return a.number===e}));console.log(a),s(a.number),p(a.videoPath),k(a.text)}(e.number)},color:"secondary",variant:"outlined"},"Lesson \u2116",e.number))}))))),l.a.createElement("div",{className:"admin__lesson__content"},l.a.createElement("div",{className:"admin__lesson__content"},l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("div",{className:"admin__lesson__textField"},l.a.createElement(S.a,{value:i,onChange:function(e){s(String(e.target.value)||"")},label:"Lesson Number",variant:"outlined"})),l.a.createElement("div",{className:"admin__lesson__textField"},l.a.createElement(S.a,{style:{width:770},value:v,onChange:function(e){p(String(e.target.value)||"")},label:"Lesson Video Path",variant:"outlined"}))),l.a.createElement("div",{className:"admin__message__button"},l.a.createElement(N.a,{color:"primary",disabled:0===y.length||!i||!v,variant:"contained",onClick:function(){h&&h.doc(i).set({number:i,text:y,videoPath:v,newLesson:!0}),k(""),s(""),p(""),w(!0)}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))),l.a.createElement("div",{className:"admin__lesson__field"},l.a.createElement(T.a,{className:"scrollbar",value:y,onChange:function(e){k(e.target.value)},fullWidth:!0,inputProps:{"aria-label":"naked"},multiline:!0,placeholder:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u044f\u0437\u044b\u043a \u0440\u0430\u0437\u043c\u0435\u0442\u043a\u0438 - Markdown"}))),l.a.createElement(A.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:C,autoHideDuration:6e3,onClose:I,message:"\u0423\u0440\u043e\u043a \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d",action:l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a,{color:"secondary",size:"small",onClick:I},"\u0421\u043a\u0440\u044b\u0442\u044c"),l.a.createElement(M.a,{size:"small","aria-label":"close",color:"inherit",onClick:I},l.a.createElement(W.a,{fontSize:"small"})))}))},z=t(24),D=t(279),P=t(268),R=t(269),B=t(119),F=t.n(B),K=t(76),H=t.n(K),V=t(266),J=t(271),X=t(277),G=t(278),Z=t(270),q=t(262),Q=function(e){var a=e.taskCurrentUser,t=e.setUserMessages,n=e.setCurrentTaskInfo,c=l.a.useState(""),r=Object(m.a)(c,2),i=r[0],s=r[1],o=l.a.useState(!1),d=Object(m.a)(o,2),u=d[0],E=d[1],_=l.a.useState(),f=Object(m.a)(_,2),v=f[0],h=f[1],g=function(){E(!1),s("")};return l.a.createElement("div",{className:"admin__table__content--task admin__".concat(a.status)},l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("div",null,l.a.createElement("span",{style:{fontWeight:500,fontSize:24}},a.status),l.a.createElement("span",{style:{color:"gray",fontWeight:500,fontSize:19,paddingLeft:10}},Object(R.a)(a.createdAt.toDate(),"dd.MM.yyyy - HH:mm"))),l.a.createElement("span",{style:{fontWeight:600,fontSize:24}},"\u0423\u0440\u043e\u043a \u2116"+a.number),"pending"===a.status&&l.a.createElement("div",null,l.a.createElement(N.a,{onClick:function(){s(""),E(!0)},variant:"outlined",color:"secondary"},"\u0440\u0435\u0448\u0435\u043d\u0438\u0435"))),l.a.createElement("p",null,"\u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0433\u0438\u0442\u0445\u0430\u0431: "+a.reference),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement(N.a,{variant:"contained",color:"primary",onClick:function(){n(a),b.where("taskId","==",a.taskId).orderBy("createdAt","asc").onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(Object(z.a)(Object(z.a)({},e.data()),{},{messageId:e.id}))})),t(a)}))}},"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",l.a.createElement(V.a,{style:{color:"grey",marginLeft:5},color:"secondary",badgeContent:0,variant:"dot"},l.a.createElement(F.a,null))),l.a.createElement(N.a,{color:"secondary",onClick:function(){p.doc(a.taskId).delete(),b.where("taskId","==",a.taskId).get().then((function(e){e.forEach((function(e){e.ref.delete()}))}))},startIcon:l.a.createElement(H.a,null)},"DELETE")),l.a.createElement(J.a,{className:"admin_activities__modal",open:u,onClose:g,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},l.a.createElement("div",{className:"item-wrapper admin__modal"},l.a.createElement(X.a,{className:"admin_activities__formControl"},l.a.createElement(G.a,{htmlFor:"demo-dialog-native"},"\u0420\u0435\u0448\u0435\u043d\u0438\u0435"),l.a.createElement(Z.a,{native:!0,value:v,onChange:function(e){h(String(e.target.value)||"")},input:l.a.createElement(q.a,{id:"demo-dialog-native"})},l.a.createElement("option",{"aria-label":"None",value:""}),l.a.createElement("option",{value:"completed"},"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e"),l.a.createElement("option",{value:"rejected"},"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e"))),l.a.createElement("p",null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439: "),l.a.createElement("div",{className:"admin__modal-field"},l.a.createElement(T.a,{className:"scrollbar",rows:8,value:i,onChange:function(e){s(e.target.value)},fullWidth:!0,inputProps:{"aria-label":"naked"},multiline:!0,placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})),l.a.createElement("div",{className:"admin__modal-button"},l.a.createElement("div",{className:"button--cancel"},l.a.createElement(N.a,{onClick:g,variant:"contained"},"\u041e\u0442\u043c\u0435\u043d\u0430")),l.a.createElement("div",{className:"button--send"},l.a.createElement(N.a,{onClick:function(){return e=v,p.doc(a.taskId).set({status:e,number:a.number,createdAt:a.createdAt,decision:i,reference:"",newTask:!0,responseAt:new Date,uid:a.uid}),void E(!1);var e},disabled:!v,variant:"contained"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))))},Y=t(274),$=t(267);function ee(e){var a=e.taskId,t=l.a.useState(""),n=Object(m.a)(t,2),c=n[0],r=n[1],i=l.a.useState(!1),s=Object(m.a)(i,2),o=s[0],d=s[1],u=l.a.useState([]),E=Object(m.a)(u,2),_=E[0],f=E[1],v=l.a.useState([]),h=Object(m.a)(v,2),g=h[0],y=h[1],k=l.a.useRef(null);l.a.useEffect((function(){if(o){var e=k.current;null!==e&&e.focus()}}),[o]);var S=function(){c&&b.add({name:"\u0426\u0430\u0440\u0435\u0432\u0438\u0447",text:c,profilePicUrl:fe,createdAt:new Date,newMessage:!0,uid:_e,taskId:a}),r("")};return l.a.createElement("div",null,l.a.createElement(N.a,{color:"secondary",onClick:function(){d(!0),b.where("taskId","==",a).orderBy("createdAt","asc").onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(Object(z.a)(Object(z.a)({},e.data()),{},{messageId:e.id}))})),f(a)})),p.doc(a).get().then((function(e){e.exists&&y(e.data())}))}},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433"),l.a.createElement(Y.a,{open:o,onClose:function(){d(!1),b.where("taskId","==",a).where("uid","!=",_e).where("newMessage","==",!0).get().then((function(e){e.forEach((function(e){b.doc(e.id).update({newMessage:!1})}))}))},maxWidth:"lg",scroll:"body","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},l.a.createElement($.a,null,l.a.createElement("div",{className:"admin__table__content--task admin__".concat(g.status)},l.a.createElement("h2",null,"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u2116",g.number),l.a.createElement("p",null,"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0433\u0438\u0442\u0445\u0430\u0431: ",g.reference||"\u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"),l.a.createElement("p",null,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043a \u0437\u0430\u0434\u0430\u043d\u0438\u044e: ",g.decision||"\u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442")),!!_.length&&_.map((function(e){return l.a.createElement(te,{key:e.messageId,message:e,newMessages:!1})})),l.a.createElement("div",{className:"admin__message__chat"},l.a.createElement("div",{className:"admin__message__chat-field"},l.a.createElement(T.a,{className:"scrollbar",rows:4,rowsMax:10,value:c,onChange:function(e){r(e.target.value)},onKeyUp:function(e){e.shiftKey||"Enter"!==e.key||S()},fullWidth:!0,inputProps:{"aria-label":"naked"},multiline:!0,placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})),l.a.createElement("div",{className:"admin__message__button"},l.a.createElement(N.a,{color:"primary",disabled:0===c.length,variant:"contained",onClick:S,endIcon:l.a.createElement(P.a,null,"send")},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))))}var ae,te=function(e){var a=e.message,t=e.newMessage;return l.a.createElement("div",{className:"admin__message__item"},l.a.createElement("div",{className:"admin__message__user"},l.a.createElement("div",{className:"admin__message__user--info"},l.a.createElement(D.a,{className:"admin__message__avatar",alt:"user avatar",src:a.profilePicUrl||void 0}),l.a.createElement("div",{className:"admin__message__title"},l.a.createElement("span",{className:"admin__message__name"},a.name),l.a.createElement("span",{className:"admin__message__info"},"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e ",Object(R.a)(a.createdAt.toDate(),"dd.MM.yyyy, \u0432 HH.mm.ss")))),l.a.createElement("div",null,t?l.a.createElement(ee,{taskId:a.taskId}):l.a.createElement(N.a,{color:"secondary",onClick:function(){return e=a.messageId,void b.doc(e).delete();var e},startIcon:l.a.createElement(H.a,null)},"DELETE"))),l.a.createElement("div",{className:"admin__message__item-text"},l.a.createElement(k.a,{source:a.text})))},ne=function(){var e=l.a.useState([]),a=Object(m.a)(e,2),t=a[0],n=a[1],c=l.a.useState([]),r=Object(m.a)(c,2),i=r[0],s=r[1],o=l.a.useState([]),d=Object(m.a)(o,2),u=d[0],E=d[1],_=l.a.useState(),f=Object(m.a)(_,2),h=f[0],g=f[1],y=l.a.useState(""),k=Object(m.a)(y,2),S=k[0],O=k[1];l.a.useEffect((function(){v.where("accepted","==",!0).onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(e.data())})),n(a)}))}),[]);var j=function(){S&&(console.log(h),b.add({name:"\u0426\u0430\u0440\u0435\u0432\u0438\u0447",text:S,profilePicUrl:fe,createdAt:new Date,newMessage:!0,uid:_e,taskId:h.taskId})),O("")};return l.a.createElement("div",null,l.a.createElement("div",{className:"admin__table"},l.a.createElement("div",{className:"admin__table__header"},t.map((function(e){return l.a.createElement("div",{className:"admin__table__header--item",key:e.uid||0},l.a.createElement(N.a,{startIcon:l.a.createElement(D.a,{src:e.photoURL||void 0}),variant:"contained",color:"primary",onClick:function(){return a=e.uid,E([]),g(void 0),void p.where("uid","==",a).orderBy("createdAt","asc").onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(Object(z.a)(Object(z.a)({},e.data()),{},{taskId:e.id}))})),s(a)}));var a}},e.displayName||e.email||e.uid))}))),l.a.createElement("div",{className:"admin__table__content"},l.a.createElement("div",{className:"admin__table__content--tasks scrollbar"},i.length&&i.map((function(e){return l.a.createElement(Q,{key:e.taskId,taskCurrentUser:e,setUserMessages:E,setCurrentTaskInfo:g})}))),l.a.createElement("div",{className:"admin__table__content--messages scrollbar"},h&&l.a.createElement("div",{className:"admin__table__content--messages--info"},l.a.createElement("div",null,"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0433\u0438\u0442\u0445\u0430\u0431: ",h.reference||"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"),l.a.createElement("div",null,"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: ",h.decision||"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442")),u.length&&u.map((function(e){return l.a.createElement(te,{key:e.messageId,newMessage:!1,message:e})})),h&&l.a.createElement("div",{className:"admin__message__chat"},l.a.createElement("div",{className:"admin__message__chat-field"},l.a.createElement(T.a,{className:"scrollbar",rows:4,rowsMax:10,value:S,onChange:function(e){O(e.target.value)},onKeyUp:function(e){e.shiftKey||"Enter"!==e.key||j()},fullWidth:!0,inputProps:{"aria-label":"naked"},multiline:!0,placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})),l.a.createElement("div",{className:"admin__message__button"},l.a.createElement(N.a,{color:"primary",disabled:0===S.length||!h,variant:"contained",onClick:j,endIcon:l.a.createElement(P.a,null,"send")},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))))))},le=function(){return l.a.createElement("div",{className:"admin__nav"},l.a.createElement(s.b,{to:"/"},l.a.createElement(N.a,null,"\u041d\u043e\u0432\u043e\u0441\u0442\u0438")),l.a.createElement(s.b,{to:"/users"},l.a.createElement(N.a,null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438")),l.a.createElement(s.b,{to:"/lesson"},l.a.createElement(N.a,null,"\u0412\u0438\u0434\u0435\u043e \u0443\u0440\u043e\u043a\u0438")),l.a.createElement(s.b,{to:"/resources"},l.a.createElement(N.a,null,"\u0420\u0435\u0441\u0443\u0440\u0441\u044b")))},ce=t(280),re=t(96),ie=t.n(re),se=function(e){return function(e){return e.users}(e).items},oe=function(){var e=l.a.useState([]),a=Object(m.a)(e,2),t=a[0],n=a[1],c=l.a.useState([]),r=Object(m.a)(c,2),s=r[0],o=r[1],d=Object(i.c)(se);l.a.useEffect((function(){n(d.filter((function(e){return!1===e.accepted}))),o(d.filter((function(e){return!0===e.accepted})))}),[d]);var u=function(e){e.accepted&&v.doc(e.uid).update({accepted:!1}),e.accepted||v.doc(e.uid).update({accepted:!0})};return d?l.a.createElement("div",{className:"admin__users"},l.a.createElement("div",{className:"admin__users__auth"},l.a.createElement("h2",null,"\u041d\u0435 \u043e\u043f\u043b\u0430\u0442\u0438\u0432\u0448\u0438\u0435 \u043a\u0443\u0440\u0441 (",t.length,"):"),l.a.createElement("div",{className:"admin__users__list"},t.length?t.map((function(e){return l.a.createElement("div",{key:e.uid,className:"admin__users__list__item"},l.a.createElement(ce.a,{variant:"outlined",label:e.displayName||e.email||e.uid,color:"secondary",avatar:l.a.createElement(D.a,{src:e.photoURL})}),l.a.createElement(M.a,{onClick:function(){return u(e)}},l.a.createElement(ie.a,null)))})):l.a.createElement("div",null,"\u041a\u0430\u0436\u0438\u0441\u044c \u043f\u0443\u0441\u0442\u043e..."))),l.a.createElement("div",{className:"admin__users__accepted"},l.a.createElement("h2",null," \u041e\u043f\u043b\u0430\u0442\u0438\u0432\u0448\u0438\u0435 \u043a\u0443\u0440\u0441 (",s.length,"):"),l.a.createElement("div",{className:"admin__users__list__accepted"},s.length?s.map((function(e){return l.a.createElement("div",{key:e.uid,className:"admin__users__list__item"},l.a.createElement(ce.a,{variant:"outlined",label:e.displayName||e.email,color:"secondary",avatar:l.a.createElement(D.a,{src:e.photoURL})}),l.a.createElement(M.a,{onClick:function(){return u(e)}},l.a.createElement(ie.a,null)))})):l.a.createElement("div",null,"\u041a\u0430\u0436\u0438\u0441\u044c \u043f\u0443\u0441\u0442\u043e...")))):l.a.createElement("div",null,"\u0413\u0440\u0443\u0437\u0438\u043c, \u0433\u0440\u0443\u0437\u0438\u043c...")},de=function(e){return function(e){return e.tasks}(e).items},me=function(){var e=l.a.useState([]),a=Object(m.a)(e,2),t=a[0],n=a[1],c=Object(i.c)(de);return l.a.useEffect((function(){n(c.filter((function(e){return"pending"===e.status})))}),[c]),l.a.createElement("div",{className:"admin__table__content--tasks scrollbar"},l.a.createElement("h2",{style:{position:"sticky",top:0,backgroundColor:"#fff",zIndex:500}},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u0430\u0441\u043a\u043e\u0432 \u0432 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0438: ",t.length),!!t.length&&t.map((function(e){return l.a.createElement(Q,{key:e.taskId,taskCurrentUser:e})})))},ue=function(){var e=l.a.useState([]),a=Object(m.a)(e,2),t=a[0],n=a[1];return l.a.useEffect((function(){b.where("newMessage","==",!0).where("uid","!=",_e).orderBy("uid","asc").orderBy("createdAt","asc").onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(Object(z.a)(Object(z.a)({},e.data()),{},{messageId:e.id}))})),n(a)}))}),[]),l.a.createElement("div",{className:"admin__table__content--messages scrollbar"},l.a.createElement("h2",{style:{position:"sticky",top:0,backgroundColor:"#fff",zIndex:500}},"\u041d\u0435\u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043d\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439: ",t.length),!!t.length&&t.map((function(e){return l.a.createElement(te,{key:e.messageId,newMessage:!0,message:e})})))};!function(e){e.SET_TASKS="tasks/SET_TASKS"}(ae||(ae={}));var Ee;!function(e){e.SET_USERS="users/SET_USERS"}(Ee||(Ee={}));var _e="12086860",fe="https://avatars3.githubusercontent.com/u/12086860?v=4";function ve(){var e=Object(i.b)();return l.a.useEffect((function(){p.onSnapshot((function(a){var t,n=[];a.forEach((function(e){var a,t;n.push({number:e.data().number,status:e.data().status,taskId:e.id,createdAt:e.data().createdAt,responseAt:null===(a=e.data())||void 0===a?void 0:a.responseAt,newTask:e.data().newTask,description:null===(t=e.data())||void 0===t?void 0:t.description})})),e((t=n,{type:ae.SET_TASKS,payload:t}))}))}),[e]),l.a.useEffect((function(){v.onSnapshot((function(a){var t,n=[];a.forEach((function(e){var a,t,l;n.push({accepted:e.data().accepted,displayName:null===(a=e.data())||void 0===a?void 0:a.displayName,email:null===(t=e.data())||void 0===t?void 0:t.email,learningFlow:e.data().learningFlow,photoURL:null===(l=e.data())||void 0===l?void 0:l.photoURL,uid:e.data().uid})})),e((t=n,{type:Ee.SET_USERS,payload:t}))}))}),[e]),l.a.createElement("div",{className:"App"},l.a.createElement(le,null),l.a.createElement(o.a,{exact:!0,path:"/lesson"},l.a.createElement(L,null)),l.a.createElement(o.a,{exact:!0,path:"/resources"},l.a.createElement(x,null)),l.a.createElement(o.a,{exact:!0,path:"/users"},l.a.createElement(ne,null)),l.a.createElement(o.a,{exact:!0,path:"/"},l.a.createElement(oe,null),l.a.createElement("div",{className:"admin__table__content"},l.a.createElement(me,null),l.a.createElement(ue,null))))}t(217);var pe=t(37),be=t(120),he=t(77),ge=Object(he.a)((function(e,a){switch(a.type){case ae.SET_TASKS:e.items=a.payload}}),{items:[]}),ye=Object(he.a)((function(e,a){switch(a.type){case Ee.SET_USERS:e.items=a.payload}}),{items:[]}),ke=Object(pe.c)({tasks:ge,users:ye}),Se="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||pe.d,Ne=Object(pe.e)(ke,Se(Object(pe.a)(be.a))),Oe=document.getElementById("root");r.a.render(l.a.createElement(i.a,{store:Ne},l.a.createElement(s.a,null,l.a.createElement(ve,null))),Oe)}},[[130,1,2]]]);
//# sourceMappingURL=main.fb1ace7c.chunk.js.map